#!/usr/bin/env bash
# Autor : SAID LAMGHARI

if [ -z "$1" ]; then
    echo "Usage: $0 domain [subdomain]"
    exit 1
fi
if [ -z "$2" ]; then
    lookup_subdomain www "$1"
    lookup_subdomain lb-01 "$1"
    lookup_subdomain web-01 "$1"
    lookup_subdomain web-02 "$1"
else
    lookup_subdomain "$2" "$1"
fi

function lookup_subdomain() {
    dig "$1.$2" +short | awk 'BEGIN { FS = " " } { print "The subdomain " $1 " is a " $3 " record and points to " $4 }'
}
