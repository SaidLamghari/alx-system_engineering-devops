#!/usr/bin/env bash

grxrdinfo() {
  domaine="$1"
  sous_domaine="$2"

  type_enregistrement=$(dig +short "$sous_domaine.$domaine" | awk 'NR==1 {print $4}')
  destination=$(dig +short "$sous_domaine.$domaine" | awk 'NR==1 {print $1}')
  echo "The subdomain $subdomain is a $record_type record and points to $destination"
}
domaine="$1"
sous_domaine="$2"

if [ -n "$sous_domaine" ]; then
  grxrdinfo "$domaine" "$sous_domaine"
fi

if [ -z "$sous_domaine" ]; then
  grxrdinfo "$domaine" "www"
  grxrdinfo "$domaine" "lb-01"
  grxrdinfo "$domaine" "web-01"
  grxrdinfo "$domaine" "web-02"
fi
